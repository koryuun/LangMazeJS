import{p as e}from"./phaser-C2_wa_Fb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class t{}class l extends t{constructor(e,t){super(),this.cells=[e,t]}remove(){this.cells[0].removeWall(this),this.cells[1].removeWall(this)}getOtherCell(e){return this.cells[0]===e?this.cells[1]:this.cells[0]}}class s extends t{constructor(){super()}}class i{constructor(e,t){this.x=e,this.y=t,this.walls=Array(4).fill(null)}getX(){return this.x}getY(){return this.y}isOpen(){return this.walls.some((e=>null===e))}setRightWall(e){this.walls[1]=e}setLeftWall(e){this.walls[0]=e}setTopWall(e){this.walls[2]=e}setBottomWall(e){this.walls[3]=e}getRightWall(){return this.walls[1]}getLeftWall(){return this.walls[0]}getTopWall(){return this.walls[2]}getBottomWall(){return this.walls[3]}removeWall(e){this.walls=this.walls.map((t=>t===e?null:t))}getRandomWall(){const e=this.walls.filter((e=>e instanceof l&&!e.getOtherCell(this).isOpen()));return 0===e.length?null:e[Math.floor(Math.random()*e.length)]}}class r{constructor(e,t){this.width=e,this.height=t,this.maze=[];for(let l=0;l<t;l++)for(let t=0;t<e;t++)this.maze.push(new i(t,l));this.stack=[],this.createAllWalls()}getWidth(){return this.width}getHeight(){return this.height}getCell(e,t){return this.maze[t*this.width+e]}createCellWalls(e,t){const i=this.getCell(e,t);let r;if(0===e)r=new s;else{const s=this.getCell(e-1,t);r=new l(s,i),s.setRightWall(r)}if(i.setLeftWall(r),0===t)r=new s;else{const s=this.getCell(e,t-1);r=new l(s,i),s.setBottomWall(r)}i.setTopWall(r),e===this.width-1&&(r=new s,i.setRightWall(r)),t===this.height-1&&(r=new s,i.setBottomWall(r))}createAllWalls(){for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++)this.createCellWalls(t,e)}removeRandomWallsStart(e){this.stack=[e]}removeRandomWall(){let e,t=null;for(;null===t;){if(0===this.stack.length)return!1;e=this.stack.at(-1),t=e.getRandomWall(),null===t&&this.stack.pop()}const l=t.getOtherCell(e);return t.remove(),this.stack.push(l),!0}removeRandomWalls(){for(this.removeRandomWallsStart(this.getCell(0,0));this.removeRandomWall(););}}const a=20,o=400-30*a/2,n=400-30*a/2;function h(e,t,l,i){e.beginPath(),t.getLeftWall()&&(e.moveTo(l,i),e.lineTo(l,i+a)),t.getTopWall()&&(e.moveTo(l,i),e.lineTo(l+a,i)),t.getRightWall()instanceof s&&(e.moveTo(l+a,i),e.lineTo(l+a,i+a)),t.getBottomWall()instanceof s&&(e.moveTo(l,i+a),e.lineTo(l+a,i+a)),e.stroke()}function c(e,t){e.clearRect(0,0,30*a,30*a);for(let l=0;l<t.getHeight();l++)for(let s=0;s<t.getWidth();s++)h(e,t.getCell(s,l),s*a,l*a)}class m extends e.Scene{constructor(){super("Game")}preload(){this.load.setPath("assets"),this.load.image("background","bg.png"),this.load.image("logo","logo.png"),this.maze=new r(30,30),this.maze.removeRandomWallsStart(this.maze.getCell(0,0))}create(){this.mazeTexture=this.textures.createCanvas("maze",30*a+10,30*a+10),this.c=this.mazeTexture.getSourceImage(),c(this.c.getContext("2d"),this.maze),this.add.image(o,n,"maze").setOrigin(0)}update(){this.maze.removeRandomWall()&&(c(this.c.getContext("2d"),this.maze),this.mazeTexture.refresh())}}const g={type:e.CANVAS,width:800,height:800,parent:"game-container",backgroundColor:"#FFFFFF",scale:{mode:e.Scale.FIT,autoCenter:e.Scale.CENTER_BOTH},scene:[m]};new e.Game(g);
