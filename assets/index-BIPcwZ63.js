import{p as t}from"./phaser-C2_wa_Fb.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const l of t)if("childList"===l.type)for(const t of l.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class e{}class l extends e{constructor(t,e){super(),this.cells=[t,e]}getCells(){return[...this.cells]}remove(){this.cells[0].removeWall(this),this.cells[1].removeWall(this)}getOtherCell(t){return this.cells[0]===t?this.cells[1]:this.cells[0]}}class s extends e{constructor(){super()}}class i{constructor(t,e){this.x=t,this.y=e,this.walls=Array(4).fill(null)}getX(){return this.x}getY(){return this.y}isOpen(){return this.walls.some((t=>null===t))}setRightWall(t){this.walls[1]=t}setLeftWall(t){this.walls[0]=t}setTopWall(t){this.walls[2]=t}setBottomWall(t){this.walls[3]=t}getRightWall(){return this.walls[1]}getLeftWall(){return this.walls[0]}getTopWall(){return this.walls[2]}getBottomWall(){return this.walls[3]}removeWall(t){this.walls=this.walls.map((e=>e===t?null:e))}getRandomWall(){const t=this.walls.filter((t=>t instanceof l&&!t.getOtherCell(this).isOpen()));return 0===t.length?null:t[Math.floor(Math.random()*t.length)]}}class r{constructor(t,e){this.width=t,this.height=e,this.maze=[];for(let l=0;l<e;l++)for(let e=0;e<t;e++)this.maze.push(new i(e,l));this.stack=[],this.createAllWalls()}getWidth(){return this.width}getHeight(){return this.height}getCell(t,e){return this.maze[e*this.width+t]}createCellWalls(t,e){const i=this.getCell(t,e);let r;if(0===t)r=new s;else{const s=this.getCell(t-1,e);r=new l(s,i),s.setRightWall(r)}if(i.setLeftWall(r),0===e)r=new s;else{const s=this.getCell(t,e-1);r=new l(s,i),s.setBottomWall(r)}i.setTopWall(r),t===this.width-1&&(r=new s,i.setRightWall(r)),e===this.height-1&&(r=new s,i.setBottomWall(r))}createAllWalls(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++)this.createCellWalls(e,t)}removeRandomWallsStart(t){this.stack=[t]}removeRandomWall(){let t,e=null;for(;null===e;){if(0===this.stack.length)return null;t=this.stack.at(-1),e=t.getRandomWall(),null===e&&this.stack.pop()}const l=e.getOtherCell(t),s=[{x:t.getX(),y:t.getY()},{x:l.getX(),y:l.getY()}];return e.remove(),this.stack.push(l),s}removeRandomWalls(){for(this.removeRandomWallsStart(this.getCell(0,0));this.removeRandomWall(););}}function a(t,e,l){if(e===t.getWidth()&&l===t.getHeight())return 0;if(e===t.getWidth()&&l<t.getHeight())return 1;if(e<t.getWidth()&&l===t.getHeight())return 2;const s=t.getCell(e,l),i=s.getLeftWall(),r=s.getTopWall();return i&&r?3:i?1:r?2:0}class n extends t.Scene{constructor(){super("Game"),this.isMazeDrawingInProgress=!0}preload(){this.load.setPath("assets"),this.load.image("tiles","bricks.png"),this.load.image("walls","walls.png")}create(){this.maze=new r(16,16),this.mapData=function(t){const e=new Array(t.getHeight()+1);for(let l=0;l<=t.getHeight();l++){e[l]=new Array(t.getWidth()+1);for(let s=0;s<=t.getWidth();s++)e[l][s]=a(t,s,l)}return e}(this.maze),this.map=this.make.tilemap({data:this.mapData,tileWidth:32,tileHeight:32});const t=this.map.addTilesetImage("walls");this.layer=this.map.createLayer(0,t),this.maze.removeRandomWallsStart(this.maze.getCell(0,0))}update(){this.isMazeDrawingInProgress&&this.mazeDrawAnimation()}mazeDrawAnimation(){const t=this.maze.removeRandomWall();if(t){let{x:e,y:l}=t[0],{x:s,y:i}=t[1];this.map.putTileAt(a(this.maze,e,l),e,l),this.map.putTileAt(a(this.maze,s,i),s,i)}else this.isMazeDrawingInProgress=!1}}const h={type:t.CANVAS,width:520,height:520,parent:"game-container",backgroundColor:"#FFFFFF",scale:{mode:t.Scale.FIT,autoCenter:t.Scale.CENTER_BOTH},scene:[n]};new t.Game(h);
